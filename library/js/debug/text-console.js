/**
* @fileoverview Use this console if you plan to ship your
* SDK developed software in the wild. It allow the crashes
* to be recorded on the backend and sent to a debug server 
* along side with the internal debug. You should download
* the debug generated by this console and use grep/ other test tools
* to read it
*/

/**
 * Include boilerplate for node with amdefine
 * This way the code can be tested on nodejs, i.e. faster and easier than
 * on the browser
 */
if (typeof define !== 'function') {
	var define = require('amdefine')(module);
}

define([
	'debug/simple-console',
	'oop/inherit',
	'debug/log-formaters'
], function(SimpleConsole, inherit, LogFormaters){

    /**
     * Implements text only console
     * @constructor
     */
	var TextConsole = function() {
		SimpleConsole.call(this);
		this.formatter_ = LogFormaters.text;
	};
	
	inherit(TextConsole, SimpleConsole);
	
	TextConsole.prototype.initStream_ = function() {
		if ( typeof console !== 'undefined' ) {
			this.stream_ = console;
			return;
		}
		throw Error('NO console interface found, are you sure this is Tornado');
	};
	
    /**
     * Add new record to the debug console
     * @param {LogRecord}
     */
	TextConsole.prototype.putRecord = function( log_record ) {
		this.stream_.log( this.formatter_( log_record ) );
	};

	return TextConsole;
});
